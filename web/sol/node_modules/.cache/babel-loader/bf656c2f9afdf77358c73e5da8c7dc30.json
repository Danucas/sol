{"ast":null,"code":"var _jsxFileName = \"/home/dan/Documents/sol/sol/src/App.js\";\nimport React, { useRef } from 'react';\nimport * as tf from \"@tensorflow/tfjs\";\nimport * as bodyPix from \"@tensorflow-models/body-pix\";\nimport Webcam from \"react-webcam\";\nimport './App.css';\nimport backVideo from './airport.mp4';\n\nfunction App() {\n  const webcamRef = useRef(null);\n  const canvasRef = useRef(null);\n  const backVideoRef = useRef(null);\n\n  const runBodySegment = async () => {\n    const net = await bodyPix.load();\n    backVideoRef.current.video.play();\n    console.log(backVideoRef); // backVideoRef.play();\n\n    detect(net); // setInterval(() => {\n    // \tdetect(net);\n    // }, 100);\n  };\n\n  const backMask = function (image) {\n    const video = backVideoRef;\n    return image;\n  };\n\n  const detect = async net => {\n    if (typeof webcamRef.current !== \"undefined\" && webcamRef.current !== null && webcamRef.current.video.readyState === 4) {\n      const video = webcamRef.current.video;\n      const videoHeight = video.videoHeight;\n      const videoWidth = video.videoWidth;\n      webcamRef.current.video.height = videoHeight;\n      webcamRef.current.video.width = videoWidth;\n      canvasRef.current.width = videoWidth;\n      canvasRef.current.height = videoHeight;\n      const outStride = 16;\n      const segThreshold = 0.5;\n      const person = await net.segmentPersonParts(video, outStride, segThreshold);\n      console.log(person);\n      const coloredPart = bodyPix.toColoredPartMask(person);\n      const back = backMask(coloredPart);\n      console.log(back);\n      bodyPix.drawMask(canvasRef.current, video, back, 0.7, 0, false);\n    }\n  };\n\n  runBodySegment();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: \"App-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Webcam, {\n    ref: webcamRef,\n    style: {\n      position: \"absolute\",\n      marginLeft: \"auto\",\n      marginRight: \"auto\",\n      left: 0,\n      right: 0,\n      textAlign: \"center\",\n      zIndex: 9,\n      width: 640,\n      height: 480\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"canvas\", {\n    ref: canvasRef,\n    style: {\n      position: \"absolute\",\n      marginLeft: \"auto\",\n      marginRight: \"auto\",\n      left: 0,\n      right: 0,\n      textAlign: \"center\",\n      zIndex: 9,\n      width: 640,\n      height: 480\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 3\n    }\n  }), /*#__PURE__*/React.createElement(\"video\", {\n    ref: backVideoRef,\n    style: {\n      position: \"absolute\",\n      marginTop: 0,\n      marginLeft: 0,\n      marginRight: 0,\n      left: 0,\n      top: 0,\n      right: 0,\n      textAlign: \"center\",\n      zIndex: 12,\n      width: 640,\n      height: 480\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"source\", {\n    src: backVideo,\n    type: \"video/mp4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 4\n    }\n  }))));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/dan/Documents/sol/sol/src/App.js"],"names":["React","useRef","tf","bodyPix","Webcam","backVideo","App","webcamRef","canvasRef","backVideoRef","runBodySegment","net","load","current","video","play","console","log","detect","backMask","image","readyState","videoHeight","videoWidth","height","width","outStride","segThreshold","person","segmentPersonParts","coloredPart","toColoredPartMask","back","drawMask","position","marginLeft","marginRight","left","right","textAlign","zIndex","marginTop","top"],"mappings":"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","sourcesContent":["import React, { useRef } from 'react';\nimport * as tf from \"@tensorflow/tfjs\";\nimport * as bodyPix from \"@tensorflow-models/body-pix\";\nimport Webcam from \"react-webcam\";\nimport './App.css';\nimport backVideo from './airport.mp4';\n\nfunction App() {\n\tconst webcamRef = useRef(null);\n\tconst canvasRef = useRef(null);\n\tconst backVideoRef = useRef(null);\n\n\tconst runBodySegment = async () => {\n\t\tconst net = await bodyPix.load();\n\t\tbackVideoRef.current.video.play();\n\t\tconsole.log(backVideoRef);\n\t\t// backVideoRef.play();\n\t\tdetect(net);\n\t\t// setInterval(() => {\n\t\t// \tdetect(net);\n\t\t// }, 100);\n\t}\n\tconst backMask = function (image) {\n\t\tconst video = backVideoRef;\n\t\treturn image;\n\t}\n\n\tconst detect = async (net) => {\n\t\tif (\n\t\t\ttypeof webcamRef.current !== \"undefined\" &&\n\t\t\twebcamRef.current !== null &&\n\t\t\twebcamRef.current.video.readyState === 4\n\t\t\t) {\n\t\t\t\tconst video = webcamRef.current.video;\n\t\t\t\tconst videoHeight = video.videoHeight;\n\t\t\t\tconst videoWidth = video.videoWidth;\n\n\t\t\t\twebcamRef.current.video.height = videoHeight;\n\t\t\t\twebcamRef.current.video.width = videoWidth;\n\n\t\t\t\tcanvasRef.current.width = videoWidth;\n\t\t\t\tcanvasRef.current.height = videoHeight;\n\n\t\t\t\tconst outStride = 16;\n\t\t\t\tconst segThreshold = 0.5;\n\t\t\t\tconst person = await net.segmentPersonParts(video, outStride, segThreshold);\n\t\t\t\tconsole.log(person);\n\n\t\t\t\tconst coloredPart = bodyPix.toColoredPartMask(person);\n\t\t\t\tconst back = backMask(coloredPart);\n\t\t\t\tconsole.log(back);\n\t\t\t\tbodyPix.drawMask(\n\t\t\t\t\tcanvasRef.current,\n\t\t\t\t\tvideo,\n\t\t\t\t\tback,\n\t\t\t\t\t0.7,\n\t\t\t\t\t0,\n\t\t\t\t\tfalse\n\t\t\t\t)\n\t\t\t}\n\t}\n\n\trunBodySegment();\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n\t   <Webcam ref={webcamRef}\n\t\t\tstyle = {{\n\t\t\t\tposition:\"absolute\",\n\t\t\t\tmarginLeft:\"auto\",\n\t\t\t\tmarginRight:\"auto\",\n\t\t\t\tleft:0,\n\t\t\t\tright:0,\n\t\t\t\ttextAlign:\"center\",\n\t\t\t\tzIndex:9,\n\t\t\t\twidth:640,\n\t\t\t\theight:480\n\t\t\t}} />\n\t\t<canvas ref={canvasRef}\n\t\t\tstyle = {{\n\t\t\t\tposition:\"absolute\",\n\t\t\t\tmarginLeft:\"auto\",\n\t\t\t\tmarginRight:\"auto\",\n\t\t\t\tleft:0,\n\t\t\t\tright:0,\n\t\t\t\ttextAlign:\"center\",\n\t\t\t\tzIndex:9,\n\t\t\t\twidth:640,\n\t\t\t\theight:480\n\t\t\t}} />\n\t\t<video \n\t\t\tref={ backVideoRef }\n\t\t\tstyle = {{\n\t\t\t\tposition:\"absolute\",\n\t\t\t\tmarginTop:0,\n\t\t\t\tmarginLeft:0,\n\t\t\t\tmarginRight:0,\n\t\t\t\tleft:0,\n\t\t\t\ttop:0,\n\t\t\t\tright:0,\n\t\t\t\ttextAlign:\"center\",\n\t\t\t\tzIndex:12,\n\t\t\t\twidth:640,\n\t\t\t\theight:480\n\t\t\t}}>\n\t\t\t<source src={ backVideo } type=\"video/mp4\"/>\n\t\t</video>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}