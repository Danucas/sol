{"ast":null,"code":"var _jsxFileName = \"/home/dan/Documents/sol/sol/src/App.js\";\nimport React, { useRef } from 'react';\nimport ReactDOM, { unmountComponentAtNode } from 'react-dom';\nimport * as tf from \"@tensorflow/tfjs\";\nimport * as bodyPix from \"@tensorflow-models/body-pix\";\nimport Webcam from \"react-webcam\";\nimport './App.css';\nimport menuStyles from './Menu.module.css';\nimport videoStyles from './VideoFrame.module.css';\nimport backVideo from './airport.mp4';\nimport testVideo from './rendered.mp4';\nimport { v4 as uuidv4 } from 'uuid';\n\nclass RecorderEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    console.log(props.data);\n    this.data = props.data;\n    this.currenTime = 0;\n  }\n\n  play() {\n    const player = document.getElementsByClassName(videoStyles.recorded_editor_player)[0];\n    const canvas = player.querySelector('canvas');\n    canvas.width = this.data.dimensions[0];\n    canvas.height = this.data.dimensions[1];\n    const context = canvas.getContext('2d');\n    const imageData = context.createImageData(this.data.dimensions[0], this.data.dimensions[1]);\n    console.log(imageData);\n    console.log(this.data.duration);\n    const data = imageData.data;\n\n    for (let i = 0; i < this.data.images[0].length; i++) {\n      data[i] = this.data.images[0][i];\n    }\n\n    context.putImageData(imageData, 0, 0);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: videoStyles.recorded_editor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 6\n      }\n    }), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 6\n      }\n    }), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 6\n      }\n    }), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 6\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: videoStyles.recorded_editor_timeline,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: videoStyles.recorded_editor_timeline_start,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 68\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: videoStyles.recorded_editor_timeline_end,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 66\n      }\n    }))), /*#__PURE__*/React.createElement(\"audio\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: videoStyles.recorded_editor_player,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"canvas\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 6\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: videoStyles.recorded_editor_player_controls,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => {\n        this.play();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 7\n      }\n    }))));\n  }\n\n}\n\nconst root = document.getElementById('root');\n\nclass PreviewPlayer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.clipId = this.props.clipId;\n    this.playingPreview = false;\n  }\n\n  updatePreviewTime(evn) {\n    const previewer = this;\n    const videoPreview = document.getElementsByClassName(videoStyles.record_preview)[0];\n    this.video.pause();\n    const timeline = videoPreview.getElementsByClassName(videoStyles.preview_timeline)[0];\n    const timepoint = timeline.querySelector('h2');\n    const total = this.video.duration;\n    const width = timeline.clientWidth;\n    let time = (evn.clientX - 48) * (total / width);\n    this.video.currentTime = Number(time.toFixed(4));\n    this.placeTimePreviewPointer();\n\n    this.video.onseeked = function () {\n      if (previewer.playingPreview) {\n        previewer.playingPreview = false;\n        const playBtn = document.getElementsByClassName(videoStyles.preview_play)[0];\n        console.log(previewer.video.currentTime);\n        previewer.playPreview({\n          target: playBtn\n        });\n      }\n    };\n  }\n\n  placeTimePreviewPointer() {\n    const videoPreview = document.getElementsByClassName(videoStyles.record_preview)[0];\n    const video = videoPreview.querySelector('video');\n    const timeline = videoPreview.getElementsByClassName(videoStyles.preview_timeline)[0];\n    const timepoint = timeline.querySelector('h2');\n    const currentPos = video.currentTime;\n    const total = video.duration;\n    const width = timeline.clientWidth;\n    const position = Math.round(currentPos * (width / total));\n    timepoint.style.marginLeft = position - 10 + 'px';\n    console.log(video.currentTime);\n  }\n\n  playPreview(evn) {\n    const previewer = this;\n    console.log('preview');\n\n    if (!this.playingPreview) {\n      this.playingPreview = true; // video.load();\n\n      previewer.video.play(); // console.log(video.duration, video.played, video.buffered);\n\n      previewer.video.addEventListener('timeupdate', this.placeTimePreviewPointer);\n      evn.target.classList.add(videoStyles.preview_pause);\n      this.placeTimePreviewPointer();\n    } else {\n      evn.target.classList.remove(videoStyles.preview_pause);\n      this.playingPreview = false;\n      previewer.video.pause();\n      previewer.video.removeEventListener('timeupdate', this.placeTimePreviewPointer);\n    }\n  }\n\n  componentDidMount() {\n    const videoPreview = document.getElementsByClassName(videoStyles.record_preview)[0];\n    const video = videoPreview.querySelector('video');\n    this.video = video;\n    this.video.load(); // video.play();\n    // this.playingPreview = true;\n\n    const playBtn = document.getElementsByClassName(videoStyles.preview_play)[0];\n    this.playPreview({\n      target: playBtn\n    }); // playBtn.classList.add(videoStyles.preview_pause);\n    // video.addEventListener('timeupdate', this.placeTimePreviewPointer);\n  }\n\n  save() {\n    this.close();\n  }\n\n  close() {\n    const previewer = this;\n    unmountComponentAtNode(document.getElementById('preview'));\n    previewer.video.removeEventListener('timeupdate', this.placeTimePreviewPointer);\n  }\n\n  render() {\n    let clipId = this.clipId;\n    const url = `http://localhost:3001/video/clips/${clipId}`;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: videoStyles.record_preview,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: videoStyles.preview_navigation,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: videoStyles.preview_nav_back,\n      onClick: evn => {\n        this.close();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 8\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: videoStyles.preview_nav_delete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 8\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: videoStyles.preview_nav_save,\n      onClick: evn => {\n        this.save();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 8\n      }\n    }))), /*#__PURE__*/React.createElement(\"video\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"source\", {\n      type: \"video/mp4\",\n      src: url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 6\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: videoStyles.preview_controls,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: videoStyles.preview_back,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: videoStyles.preview_play,\n      onClick: evn => {\n        this.playPreview(evn);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: videoStyles.preview_ford,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: videoStyles.preview_timeline,\n      onClick: evn => {\n        this.updatePreviewTime(evn);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 8\n      }\n    }))));\n  }\n\n}\n\nfunction VideoFrame() {\n  const loadingRef = useRef(null);\n  const triggerRef = useRef(null);\n  const galleryRef = useRef(null);\n  const webcamRef = useRef(null);\n  const canvasRef = useRef(null);\n  const backVideoRef = useRef(null);\n  let render = false;\n  let recPressed = false;\n  let recording = false;\n  let currentMask;\n  let recordedframes = [];\n  const dimensions = [window.innerWidth, window.innerHeight];\n  let cropedDimensions;\n  console.log(dimensions);\n  const videoConstraints = {\n    width: dimensions[0],\n    height: dimensions[1],\n    facingMode: \"user\"\n  }; // Navigation\n\n  const back = () => {\n    stop();\n    ReactDOM.render( /*#__PURE__*/React.createElement(MainView, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 5\n      }\n    }), root);\n  };\n\n  let interval;\n  let clockInterval;\n  /**\n   * runBodySegment - startpoint for the background extraction\n   */\n\n  const runBodySegment = async () => {\n    const toolBtn = document.getElementsByClassName(videoStyles.back_remove)[0];\n\n    if (render) {\n      render = false;\n      toolBtn.classList.remove(videoStyles.active);\n      canvasRef.current.style.display = 'none';\n      clearInterval(interval);\n    } else {\n      loadingRef.current.style.visibility = 'visible';\n      toolBtn.classList.add(videoStyles.active);\n      render = true;\n      const net = await bodyPix.load();\n\n      if (backVideoRef.current) {\n        backVideoRef.current.play();\n      }\n\n      canvasRef.current.style.display = 'block';\n      interval = setInterval(async function () {\n        if (render) {\n          // webcamRef.current.video.style.visibility = 'hidden';\n          loadingRef.current.style.visibility = 'hidden';\n          galleryRef.current.style.filter = 'opacity(1)';\n          detect(net);\n        } else if (!render) {\n          clearInterval(interval);\n          console.log('no rendering');\n          canvasRef.current.style.display = 'none';\n        }\n      }, 29);\n    }\n  };\n  /**\n   * backMask - utility to apply the mask and compose the image using the video background\n   * @param {ImageData} image \n   * @param {ImageData} mask \n   * @returns {ImageData} image - after the mask is applied\n   */\n\n\n  const backMask = (image, mask) => {\n    // console.log(image, mask, backVideoRef.current);\n    const cv = document.createElement('canvas');\n    let imageData;\n\n    try {\n      const videoW = backVideoRef.current.videoWidth;\n      const videoH = backVideoRef.current.videoHeight;\n      cv.style.width = image.height * (videoW / videoH);\n      cv.style.height = image.height;\n      cv.width = image.height * (videoW / videoH);\n      ;\n      cv.height = image.height;\n      const ctx = cv.getContext('2d');\n      ctx.drawImage(backVideoRef.current, 0, 0, cv.width, cv.height);\n      imageData = ctx.getImageData(0, 0, image.width, image.height);\n    } catch (err) {\n      console.log(err);\n      return null;\n    } // console.log(image, mask, imageData);\n\n\n    for (let i = 0; i < image.data.length; i += 4) {\n      const vector = [mask.data[i], mask.data[i + 1], mask.data[i + 2], mask.data[i + 3]];\n\n      if (vector[0] === 255 && vector[1] === 255 && vector[2] === 255) {\n        image.data[i] = imageData.data[i];\n        image.data[i + 1] = imageData.data[i + 1];\n        image.data[i + 2] = imageData.data[i + 2];\n        image.data[i + 3] = imageData.data[i + 3];\n      }\n    }\n\n    return image;\n  };\n  /**\n   * detect - prediction for each WebCam frame\n   * @param {TensorFlowNet} net \n   */\n\n\n  const detect = async net => {\n    if (typeof webcamRef.current !== \"undefined\" && webcamRef.current !== null && webcamRef.current.video.readyState === 4) {\n      const videoTrack = webcamRef.current.stream.getVideoTracks()[0];\n      const video = webcamRef.current.video;\n      backVideoRef.current.width = video.videoWidth;\n      backVideoRef.current.height = video.videoHeight;\n      cropedDimensions = [video.videoWidth, video.videoHeight];\n      videoTrack.applyConstraints(videoConstraints);\n      const videoHeight = video.videoHeight;\n      const videoWidth = video.videoWidth;\n      webcamRef.current.video.width = videoWidth;\n      webcamRef.current.video.height = videoHeight;\n      canvasRef.current.width = videoWidth;\n      canvasRef.current.height = videoHeight;\n      const outStride = 16;\n      const segThreshold = 0.5;\n      const cv = document.createElement('canvas');\n      cv.style.width = videoWidth;\n      cv.style.height = videoHeight;\n      cv.width = videoWidth;\n      cv.height = videoHeight;\n      const ctx = cv.getContext('2d');\n      ctx.drawImage(video, 0, 0, cv.width, cv.height);\n      const imageData = ctx.getImageData(0, 0, cv.width, cv.height);\n      const person = await net.segmentPersonParts(video, outStride, segThreshold);\n      const coloredPart = bodyPix.toColoredPartMask(person);\n      const back = backMask(imageData, coloredPart);\n\n      if (!back) {\n        console.log('no segmentation data');\n        const ctx2 = canvasRef.current.getContext('2d');\n        ctx2.putImageData(imageData, 0, 0);\n\n        if (recording) {\n          recordedframes.push(Array.from(imageData.data));\n        }\n      } else {\n        const ctx2 = canvasRef.current.getContext('2d');\n        ctx2.putImageData(back, 0, 0);\n\n        if (recording) {\n          // console.log(back.width, back.height);\n          recordedframes.push(Array.from(back.data));\n        }\n      }\n    }\n  };\n  /**\n   * stop - Stop each streaming Track and sets render as false to stop detection\n   */\n\n\n  const stopDetection = () => {\n    render = false;\n  };\n\n  const stop = () => {\n    render = false;\n    backVideoRef.current.pause();\n    const tracks = webcamRef.current.stream.getTracks(); // console.log(tracks);\n\n    for (const track of tracks) {\n      track.stop();\n    }\n  };\n\n  const checkVideoTrack = () => {};\n\n  let recordedChuncks = [];\n  let audioStream;\n\n  const recordAudio = function () {\n    audioStream = webcamRef.current.stream;\n    const options = {\n      mimeType: 'audio/webm'\n    };\n    recordedChuncks = [];\n    console.log(audioStream);\n    var context = new AudioContext({\n      sampleRate: 44100\n    });\n    var source = context.createMediaStreamSource(audioStream);\n    var processor = context.createScriptProcessor(16384, 1, 1);\n    source.connect(processor);\n    processor.connect(context.destination);\n\n    const event = async function (e) {\n      if (recording) {\n        // console.log(e.inputBuffer);\n        recordedChuncks.push(...e.inputBuffer.getChannelData(0));\n      } else {\n        processor.onaudioprocess = null;\n      }\n    };\n\n    processor.onaudioprocess = event;\n  };\n\n  let minutes = 0;\n  let seconds = 0;\n  let mill = 0;\n\n  const activeClock = function () {\n    minutes = 0;\n    seconds = 0;\n    const clock = document.getElementsByClassName(videoStyles.record_time)[0];\n    const timeTXT = clock.querySelector('h1');\n    const timeButton = clock.querySelector('button');\n    timeButton.classList.add(videoStyles.recording);\n\n    const tic = function () {\n      if (recording) {\n        let timeStr = ``; // modify the time\n\n        let print = false;\n        mill++;\n\n        if (mill > 9) {\n          mill = 0;\n          seconds++;\n          print = true;\n        }\n\n        if (seconds > 59) {\n          seconds = 0;\n          minutes++;\n        } // add padding for the minutes and seconds\n\n\n        if (minutes < 10) {\n          timeStr += '0' + minutes;\n        } else {\n          timeStr += minutes;\n        }\n\n        timeStr += ':';\n\n        if (seconds < 10) {\n          timeStr += '0' + seconds;\n        } else {\n          timeStr += seconds;\n        } // draw the time in browser\n\n\n        if (print) {\n          timeTXT.innerHTML = timeStr;\n        }\n      } else {\n        timeButton.classList.remove(videoStyles.recording);\n        clearInterval(clockInterval);\n      }\n    };\n\n    tic();\n    clockInterval = setInterval(tic, 90);\n  };\n\n  let int;\n\n  const record = () => {\n    const triggerView = triggerRef.current;\n    console.log(triggerRef.current.querySelector('h1'));\n\n    if (!recording && !recPressed) {\n      recPressed = true;\n      recordedframes = [];\n      const clock = document.getElementsByClassName(videoStyles.record_time)[0];\n      const timeTXT = clock.querySelector('h1');\n      timeTXT.innerHTML = '00:00';\n      const recButton = document.getElementsByClassName(videoStyles.recordBtn)[0];\n      recButton.className = videoStyles.recordingBtn;\n      console.log();\n      console.log('animation init');\n      let count = 3;\n      console.log(videoStyles.trigger_anim);\n\n      function x() {\n        triggerView.querySelector('h1').className = '';\n\n        if (count === 0) {\n          console.log('stop trigger');\n          triggerView.style.display = 'none';\n          triggerView.querySelector('h1').className = '';\n          triggerView.querySelector('h1').classList.remove(videoStyles.trigger_anim);\n          clearInterval(int);\n          recording = true;\n          activeClock();\n          recordAudio();\n        } else {\n          triggerView.querySelector('h1').innerHTML = count + '!';\n          triggerView.querySelector('h1').classList.add(videoStyles.trigger_anim);\n          triggerView.style.display = 'block';\n          count--;\n        }\n      }\n\n      x();\n      int = setInterval(x, 1000);\n    } else {\n      const recButton = document.getElementsByClassName(videoStyles.recordingBtn)[0];\n      recButton.className = videoStyles.recordBtn;\n      recording = false;\n      recPressed = false;\n      clearInterval(int);\n      triggerView.style.display = 'none';\n\n      if (recordedframes.length > 0) {\n        const editor = document.getElementById('editor');\n        const props = {\n          images: recordedframes,\n          audio: recordedChuncks,\n          dimensions: cropedDimensions,\n          duration: [minutes, seconds, mill]\n        };\n        ReactDOM.render( /*#__PURE__*/React.createElement(RecorderEditor, {\n          data: props,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 7\n          }\n        }), editor);\n      }\n    }\n  };\n\n  const save = async function () {\n    const videoData = {\n      dimensions: cropedDimensions,\n      videoData: recordedframes,\n      audioData: recordedChuncks\n    };\n    console.log(videoData);\n    let body; // try {\n    // \tbody = JSON.stringify(videoData)\n    // } catch (err) {\n    // \tconsole.log(err);\n    // \treturn;\n    // }\n\n    const processId = uuidv4();\n\n    for (let aIndex = 0; aIndex < recordedChuncks.length; aIndex += 1024) {\n      const diff = recordedChuncks.length - aIndex;\n      let chunk;\n\n      if (diff < 1024) {\n        chunk = recordedChuncks.slice(aIndex, recordedChuncks.length);\n      } else {\n        chunk = recordedChuncks.slice(aIndex, aIndex + 1024);\n      }\n\n      const req = await fetch(`http://127.0.0.1:3001/video/join`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          id: processId,\n          type: 'audio',\n          data: chunk\n        })\n      });\n      console.log(await req.json());\n    }\n\n    for (let vIndex = 0; vIndex < recordedframes.length; vIndex++) {\n      let chunk;\n      chunk = Array.from(recordedframes[vIndex]);\n      const req = await fetch(`http://127.0.0.1:3001/video/join`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          id: processId,\n          type: 'video',\n          dimensions: cropedDimensions,\n          data: chunk\n        })\n      });\n      console.log(await req.json());\n    }\n\n    const req = await fetch(`http://127.0.0.1:3001/video/join`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: processId,\n        type: 'render',\n        time: {\n          minutes: minutes,\n          seconds: seconds\n        }\n      })\n    });\n    console.log(await req.json());\n    openPreview(processId);\n  };\n\n  const openPreview = function (id) {\n    const videoPreview = document.getElementById('preview');\n    ReactDOM.render( /*#__PURE__*/React.createElement(PreviewPlayer, {\n      clipId: id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 5\n      }\n    }), videoPreview);\n  };\n\n  const deleteRecorded = function () {\n    recordedChuncks = [];\n    recordedframes = [];\n    const clock = document.getElementsByClassName(videoStyles.record_time)[0];\n    const timeTXT = clock.querySelector('h1');\n    timeTXT.innerHTML = '00:00';\n  }; // runBodySegment();\n\n\n  navigator.mediaDevices.getUserMedia({\n    audio: true,\n    video: false\n  }).then(function (result) {\n    audioStream = result;\n  });\n\n  const renderView = function () {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: videoStyles.container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 604,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"preview\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 605,\n        columnNumber: 4\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: videoStyles.loading,\n      ref: loadingRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 607,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 608,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 5\n      }\n    }, \"Loading...\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: videoStyles.trigger,\n      ref: triggerRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 611,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 612,\n        columnNumber: 5\n      }\n    }, \"3!\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: videoStyles.back,\n      onClick: () => {\n        back();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 614,\n        columnNumber: 4\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: videoStyles.toolsMenu,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 616,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: videoStyles.save,\n      onClick: () => {\n        save();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 617,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"li\", {\n      className: videoStyles.back_remove,\n      onClick: () => {\n        runBodySegment();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 618,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"li\", {\n      className: videoStyles.other,\n      onClick: () => {\n        openPreview('1d6649a9-0dbb-45ba-8511-7064fa9f27a6');\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 619,\n        columnNumber: 7\n      }\n    }))), /*#__PURE__*/React.createElement(Webcam, {\n      ref: webcamRef,\n      className: videoStyles.webcam,\n      videoConstraints: videoConstraints,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 622,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"canvas\", {\n      ref: canvasRef,\n      className: videoStyles.render_canvas,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"video\", {\n      ref: backVideoRef,\n      className: videoStyles.back_video,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 627,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"source\", {\n      src: backVideo,\n      type: \"video/mp4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 630,\n        columnNumber: 6\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: videoStyles.record_time,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 632,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 633,\n        columnNumber: 6\n      }\n    }, \"00:00\"), /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 634,\n        columnNumber: 6\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"editor\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 636,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: videoStyles.controls,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 637,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: videoStyles.galleryBtn,\n      onClick: () => {},\n      ref: galleryRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 639,\n        columnNumber: 6\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: videoStyles.recordBtn,\n      onClick: () => {\n        record();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 640,\n        columnNumber: 6\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: videoStyles.deleteBtn,\n      onClick: () => {\n        deleteRecorded();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 641,\n        columnNumber: 6\n      }\n    })));\n  };\n\n  return renderView();\n}\n\nclass MainView extends React.Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: menuStyles.menu,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 653,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: menuStyles.gallery,\n      onClick: () => {\n        this.gallery();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 654,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: menuStyles.creator,\n      onClick: () => {\n        this.creator();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 655,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: menuStyles.user,\n      onClick: () => {\n        this.user();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 656,\n        columnNumber: 5\n      }\n    }));\n  }\n\n  gallery() {}\n\n  creator() {\n    ReactDOM.render( /*#__PURE__*/React.createElement(VideoFrame, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 666,\n        columnNumber: 5\n      }\n    }), root);\n  }\n\n  user() {}\n\n}\n\nfunction App() {\n  const renderVideoCapture = () => {\n    React.render( /*#__PURE__*/React.createElement(VideoFrame, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 680,\n        columnNumber: 5\n      }\n    }), root);\n  };\n\n  return /*#__PURE__*/React.createElement(MainView, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 687,\n      columnNumber: 2\n    }\n  });\n}\n\nexport default App;","map":{"version":3,"sources":["/home/dan/Documents/sol/sol/src/App.js"],"names":["React","useRef","ReactDOM","unmountComponentAtNode","tf","bodyPix","Webcam","menuStyles","videoStyles","backVideo","testVideo","v4","uuidv4","RecorderEditor","Component","constructor","props","console","log","data","currenTime","play","player","document","getElementsByClassName","recorded_editor_player","canvas","querySelector","width","dimensions","height","context","getContext","imageData","createImageData","duration","i","images","length","putImageData","render","recorded_editor","recorded_editor_timeline","recorded_editor_timeline_start","recorded_editor_timeline_end","recorded_editor_player_controls","root","getElementById","PreviewPlayer","clipId","playingPreview","updatePreviewTime","evn","previewer","videoPreview","record_preview","video","pause","timeline","preview_timeline","timepoint","total","clientWidth","time","clientX","currentTime","Number","toFixed","placeTimePreviewPointer","onseeked","playBtn","preview_play","playPreview","target","currentPos","position","Math","round","style","marginLeft","addEventListener","classList","add","preview_pause","remove","removeEventListener","componentDidMount","load","save","close","url","preview_navigation","preview_nav_back","preview_nav_delete","preview_nav_save","preview_controls","preview_back","preview_ford","VideoFrame","loadingRef","triggerRef","galleryRef","webcamRef","canvasRef","backVideoRef","recPressed","recording","currentMask","recordedframes","window","innerWidth","innerHeight","cropedDimensions","videoConstraints","facingMode","back","stop","interval","clockInterval","runBodySegment","toolBtn","back_remove","active","current","display","clearInterval","visibility","net","setInterval","filter","detect","backMask","image","mask","cv","createElement","videoW","videoWidth","videoH","videoHeight","ctx","drawImage","getImageData","err","vector","readyState","videoTrack","stream","getVideoTracks","applyConstraints","outStride","segThreshold","person","segmentPersonParts","coloredPart","toColoredPartMask","ctx2","push","Array","from","stopDetection","tracks","getTracks","track","checkVideoTrack","recordedChuncks","audioStream","recordAudio","options","mimeType","AudioContext","sampleRate","source","createMediaStreamSource","processor","createScriptProcessor","connect","destination","event","e","inputBuffer","getChannelData","onaudioprocess","minutes","seconds","mill","activeClock","clock","record_time","timeTXT","timeButton","tic","timeStr","print","innerHTML","int","record","triggerView","recButton","recordBtn","className","recordingBtn","count","trigger_anim","x","editor","audio","videoData","audioData","body","processId","aIndex","diff","chunk","slice","req","fetch","method","headers","JSON","stringify","id","type","json","vIndex","openPreview","deleteRecorded","navigator","mediaDevices","getUserMedia","then","result","renderView","container","loading","trigger","toolsMenu","other","webcam","render_canvas","back_video","controls","galleryBtn","deleteBtn","MainView","menu","gallery","creator","user","App","renderVideoCapture"],"mappings":"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","sourcesContent":["import React, { useRef } from 'react';\nimport ReactDOM, { unmountComponentAtNode } from 'react-dom'; \nimport * as tf from \"@tensorflow/tfjs\";\nimport * as bodyPix from \"@tensorflow-models/body-pix\";\nimport Webcam from \"react-webcam\";\nimport './App.css';\nimport menuStyles from './Menu.module.css';\nimport videoStyles from './VideoFrame.module.css';\nimport backVideo from './airport.mp4';\nimport testVideo from './rendered.mp4';\nimport { v4 as uuidv4 } from 'uuid';\n\n\nclass RecorderEditor extends React.Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\t\tconsole.log(props.data);\n\t\tthis.data = props.data;\n\t\tthis.currenTime = 0;\n\t}\n\tplay () {\n\t\tconst player = document.getElementsByClassName(videoStyles.recorded_editor_player)[0];\n\t\tconst canvas = player.querySelector('canvas');\n\t\tcanvas.width = this.data.dimensions[0];\n\t\tcanvas.height = this.data.dimensions[1];\n\t\tconst context = canvas.getContext('2d');\n\t\tconst imageData = context.createImageData(this.data.dimensions[0], this.data.dimensions[1]);\n\t\tconsole.log(imageData);\n\t\tconsole.log(this.data.duration);\n\t\tconst data = imageData.data;\n\t\tfor (let i = 0; i < this.data.images[0].length; i++) {\n\t\t\tdata[i]= this.data.images[0][i];\n\t\t}\n\t\tcontext.putImageData(imageData, 0, 0);\n\t}\n\trender () {\n\t\treturn (\n\t\t\t<div className={ videoStyles.recorded_editor }>\n\t\t\t\t<ul>\n\t\t\t\t\t<li></li>\n\t\t\t\t\t<li></li>\n\t\t\t\t\t<li></li>\n\t\t\t\t\t<li></li>\n\t\t\t\t</ul>\n\t\t\t\t<div className={ videoStyles.recorded_editor_timeline }>\n\t\t\t\t\t<div className={ videoStyles.recorded_editor_timeline_start }><h2></h2></div>\n\t\t\t\t\t<div className={ videoStyles.recorded_editor_timeline_end }><h2></h2></div>\n\t\t\t\t</div>\n\t\t\t\t<audio></audio>\n\t\t\t\t<div className={ videoStyles.recorded_editor_player }>\n\t\t\t\t\t<canvas></canvas>\n\t\t\t\t\t<div className={ videoStyles.recorded_editor_player_controls }>\n\t\t\t\t\t\t<button></button>\n\t\t\t\t\t\t<button onClick={ ()=> { this.play() } }></button>\n\t\t\t\t\t\t<button></button>\n\t\t\t\t\t\t<h1></h1>\n\t\t\t\t\t\t<button></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\n\nconst root = document.getElementById('root');\nclass PreviewPlayer extends React.Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\t\tthis.clipId = this.props.clipId;\n\t\tthis.playingPreview = false;\n\t}\n\tupdatePreviewTime (evn) {\n\t\tconst previewer = this;\n\t\tconst videoPreview = document.getElementsByClassName(videoStyles.record_preview)[0];\n\t\tthis.video.pause();\n\t\tconst timeline = videoPreview.getElementsByClassName(videoStyles.preview_timeline)[0];\n\t\tconst timepoint = timeline.querySelector('h2');\n\t\tconst total = this.video.duration;\n\t\tconst width = timeline.clientWidth;\n\t\tlet time = (evn.clientX - 48) * (total / width);\n\t\tthis.video.currentTime = Number(time.toFixed(4));\n\t\tthis.placeTimePreviewPointer();\n\t\tthis.video.onseeked = function () {\n\t\t\tif (previewer.playingPreview) {\n\t\t\t\tpreviewer.playingPreview = false;\n\t\t\t\tconst playBtn = document.getElementsByClassName(videoStyles.preview_play)[0];\n\t\t\t\tconsole.log(previewer.video.currentTime);\n\t\t\t\tpreviewer.playPreview({\n\t\t\t\t\ttarget: playBtn\n\t\t\t\t})\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n\tplaceTimePreviewPointer () {\n\t\tconst videoPreview = document.getElementsByClassName(videoStyles.record_preview)[0];\n\t\tconst video = videoPreview.querySelector('video');\n\t\tconst timeline = videoPreview.getElementsByClassName(videoStyles.preview_timeline)[0];\n\t\tconst timepoint = timeline.querySelector('h2');\n\t\tconst currentPos = video.currentTime;\n\t\tconst total = video.duration;\n\t\tconst width = timeline.clientWidth;\n\t\tconst position = Math.round(currentPos * (width / total));\n\t\ttimepoint.style.marginLeft = (position - 10) + 'px';\n\t\tconsole.log(video.currentTime);\n\t}\n\tplayPreview (evn) {\n\t\tconst previewer = this;\n\t\tconsole.log('preview');\n\t\tif (!this.playingPreview) {\n\t\t\tthis.playingPreview = true;\n\t\t\t// video.load();\n\t\t\tpreviewer.video.play();\n\t\t\t// console.log(video.duration, video.played, video.buffered);\n\t\t\tpreviewer.video.addEventListener('timeupdate', this.placeTimePreviewPointer);\n\t\t\tevn.target.classList.add(videoStyles.preview_pause);\n\t\t\tthis.placeTimePreviewPointer();\n\t\t} else {\n\t\t\tevn.target.classList.remove(videoStyles.preview_pause);\n\t\t\tthis.playingPreview = false;\n\t\t\tpreviewer.video.pause();\n\t\t\tpreviewer.video.removeEventListener('timeupdate', this.placeTimePreviewPointer);\n\t\t}\n\t}\n\tcomponentDidMount () {\n\t\tconst videoPreview = document.getElementsByClassName(videoStyles.record_preview)[0];\n\t\tconst video = videoPreview.querySelector('video');\n\t\tthis.video = video;\n\t\tthis.video.load();\n\t\t// video.play();\n\t\t// this.playingPreview = true;\n\t\tconst playBtn = document.getElementsByClassName(videoStyles.preview_play)[0];\n\t\tthis.playPreview({\n\t\t\ttarget: playBtn\n\t\t})\n\t\t// playBtn.classList.add(videoStyles.preview_pause);\n\t\t// video.addEventListener('timeupdate', this.placeTimePreviewPointer);\n\t}\n\tsave () {\n\t\tthis.close();\n\t}\n\tclose () {\n\t\tconst previewer = this;\n\t\tunmountComponentAtNode(document.getElementById('preview'));\n\t\tpreviewer.video.removeEventListener('timeupdate', this.placeTimePreviewPointer);\n\t}\n\trender() {\n\t\tlet clipId = this.clipId;\n\t\tconst url = `http://localhost:3001/video/clips/${clipId}`;\n\t\treturn (\n\t\t\t(\n\t\t\t\t<div className={ videoStyles.record_preview }>\n\t\t\t\t\t<div className={ videoStyles.preview_navigation }>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<button className={ videoStyles.preview_nav_back }\n\t\t\t\t\t\t\t\t\tonClick={ (evn)=>{ this.close() } }></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<button className={ videoStyles.preview_nav_delete }></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<button className={ videoStyles.preview_nav_save }\n\t\t\t\t\t\t\t\t\tonClick={ (evn)=>{ this.save() } }></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<video >\n\t\t\t\t\t<source type=\"video/mp4\" src={ url }\n\t\t\t\t\t></source>\n\t\t\t\t\t</video>\n\t\t\t\t\t<div className={ videoStyles.preview_controls }>\n\t\t\t\t\t\t<button className={ videoStyles.preview_back }></button>\n\t\t\t\t\t\t<button className={ videoStyles.preview_play } onClick={(evn)=>{ this.playPreview(evn) }}></button>\n\t\t\t\t\t\t<button className={ videoStyles.preview_ford }></button>\n\t\t\t\t\t\t<div className={ videoStyles.preview_timeline } onClick={ (evn)=>{ this.updatePreviewTime(evn)} }>\n\t\t\t\t\t\t\t<h2></h2>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t)\n\t\t)\n\t}\n}\n\nfunction VideoFrame () {\n\tconst loadingRef = useRef(null);\n\tconst triggerRef = useRef(null);\n\tconst galleryRef = useRef(null);\n\tconst webcamRef = useRef(null);\n\tconst canvasRef = useRef(null);\n\tconst backVideoRef = useRef(null);\n\tlet render = false;\n\tlet recPressed = false;\n\tlet recording = false;\n\tlet currentMask;\n\tlet recordedframes = [];\n\n\tconst dimensions = [window.innerWidth, window.innerHeight];\n\tlet cropedDimensions;\n\tconsole.log(dimensions);\n\n\tconst videoConstraints = {\n\t\twidth: dimensions[0],\n\t\theight: dimensions[1],\n\t\tfacingMode: \"user\"\n\t}\n\n\t// Navigation\n\n\tconst back = () => {\n\t\tstop();\n\t\tReactDOM.render(\n\t\t\t(\n\t\t\t\t<MainView></MainView>\n\t\t\t),\n\t\t\troot\n\t\t);\n\t}\n\tlet interval;\n\tlet clockInterval;\n\t/**\n\t * runBodySegment - startpoint for the background extraction\n\t */\n\tconst runBodySegment = async () => {\n\t\tconst toolBtn = document.getElementsByClassName(videoStyles.back_remove)[0];\n\t\tif (render) {\n\t\t\trender = false;\n\t\t\ttoolBtn.classList.remove(videoStyles.active);\n\t\t\tcanvasRef.current.style.display = 'none';\n\t\t\tclearInterval(interval);\n\t\t} else {\n\t\t\tloadingRef.current.style.visibility = 'visible';\n\t\t\ttoolBtn.classList.add(videoStyles.active);\n\t\t\trender = true;\n\t\t\tconst net = await bodyPix.load();\n\t\t\tif (backVideoRef.current) {\n\t\t\t\tbackVideoRef.current.play();\n\t\t\t}\n\t\t\tcanvasRef.current.style.display = 'block';\n\t\t\tinterval = setInterval(async function(){\n\t\t\t\tif (render) {\n\t\t\t\t\t// webcamRef.current.video.style.visibility = 'hidden';\n\t\t\t\t\tloadingRef.current.style.visibility = 'hidden';\n\t\t\t\t\tgalleryRef.current.style.filter = 'opacity(1)';\n\t\t\t\t\tdetect(net);\n\t\t\t\t} else if (!render) {\n\t\t\t\t\tclearInterval(interval);\n\t\t\t\t\tconsole.log('no rendering');\n\t\t\t\t\tcanvasRef.current.style.display = 'none';\n\t\t\t\t}\n\t\t\t}, 29);\n\t\t}\n\t}\n\t/**\n\t * backMask - utility to apply the mask and compose the image using the video background\n\t * @param {ImageData} image \n\t * @param {ImageData} mask \n\t * @returns {ImageData} image - after the mask is applied\n\t */\n\tconst backMask = (image, mask) => {\n\t\t// console.log(image, mask, backVideoRef.current);\n\t\tconst cv = document.createElement('canvas');\n\t\tlet imageData;\n\t\ttry {\n\t\t\tconst videoW = backVideoRef.current.videoWidth;\n\t\t\tconst videoH = backVideoRef.current.videoHeight;\n\t\t\tcv.style.width = image.height * (videoW / videoH);\n\t\t\tcv.style.height = image.height;\n\t\t\tcv.width = image.height * (videoW / videoH);;\n\t\t\tcv.height = image.height;\n\t\t\tconst ctx = cv.getContext('2d');\n\t\t\tctx.drawImage(backVideoRef.current, 0, 0, cv.width, cv.height);\n\t\t\timageData = ctx.getImageData(0, 0, image.width, image.height);\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\treturn null;\n\t\t}\n\t\t// console.log(image, mask, imageData);\n\t\tfor (let i = 0; i < image.data.length; i+=4) {\n\t\t\tconst vector = [\n\t\t\t\tmask.data[i],\n\t\t\t\tmask.data[i + 1],\n\t\t\t\tmask.data[i + 2],\n\t\t\t\tmask.data[i + 3],\n\t\t\t]\n\t\t\tif (\n\t\t\t\t(vector[0] === 255 &&\n\t\t\t\tvector[1] === 255 &&\n\t\t\t\tvector[2] === 255)\n\t\t\t\t) {\n\t\t\t\t\timage.data[i] = imageData.data[i];\n\t\t\t\t\timage.data[i + 1] = imageData.data[i + 1];\n\t\t\t\t\timage.data[i + 2] = imageData.data[i + 2];\n\t\t\t\t\timage.data[i + 3] = imageData.data[i + 3];\n\t\t\t}\n\t\t}\n\t\treturn image;\n\t}\n\t/**\n\t * detect - prediction for each WebCam frame\n\t * @param {TensorFlowNet} net \n\t */\n\tconst detect = async (net) => {\n\t\tif (\n\t\t\ttypeof webcamRef.current !== \"undefined\" &&\n\t\t\twebcamRef.current !== null &&\n\t\t\twebcamRef.current.video.readyState === 4\n\t\t\t) {\n\t\t\t\tconst videoTrack = webcamRef.current.stream.getVideoTracks()[0];\n\t\t\t\tconst video = webcamRef.current.video;\n\t\t\t\tbackVideoRef.current.width = video.videoWidth;\n\t\t\t\tbackVideoRef.current.height = video.videoHeight;\n\t\t\t\tcropedDimensions = [video.videoWidth, video.videoHeight];\n\t\t\t\tvideoTrack.applyConstraints(videoConstraints);\n\t\t\t\tconst videoHeight = video.videoHeight;\n\t\t\t\tconst videoWidth = video.videoWidth;\n\t\t\t\twebcamRef.current.video.width = videoWidth;\n\t\t\t\twebcamRef.current.video.height = videoHeight;\n\t\t\t\tcanvasRef.current.width = videoWidth;\n\t\t\t\tcanvasRef.current.height = videoHeight;\n\t\t\t\tconst outStride = 16;\n\t\t\t\tconst segThreshold = 0.5;\n\t\t\t\tconst cv = document.createElement('canvas');\n\t\t\t\tcv.style.width = videoWidth;\n\t\t\t\tcv.style.height = videoHeight;\n\t\t\t\tcv.width = videoWidth;\n\t\t\t\tcv.height = videoHeight;\n\t\t\t\tconst ctx = cv.getContext('2d');\n\t\t\t\tctx.drawImage(video, 0, 0, cv.width, cv.height);\n\t\t\t\tconst imageData = ctx.getImageData(0, 0, cv.width, cv.height);\n\t\t\t\tconst person = await net.segmentPersonParts(video, outStride, segThreshold);\n\t\t\t\tconst coloredPart = bodyPix.toColoredPartMask(person);\n\t\t\t\tconst back = backMask(imageData, coloredPart);\n\t\t\t\tif (!back) {\n\t\t\t\t\tconsole.log('no segmentation data');\n\t\t\t\t\tconst ctx2 = canvasRef.current.getContext('2d');\n\t\t\t\t\tctx2.putImageData(imageData, 0, 0);\n\t\t\t\t\tif (recording) {\n\t\t\t\t\t\trecordedframes.push(Array.from(imageData.data));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst ctx2 = canvasRef.current.getContext('2d');\n\t\t\t\t\tctx2.putImageData(back, 0, 0);\n\t\t\t\t\tif (recording) {\n\t\t\t\t\t\t// console.log(back.width, back.height);\n\t\t\t\t\t\trecordedframes.push(Array.from(back.data));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t}\n\t/**\n\t * stop - Stop each streaming Track and sets render as false to stop detection\n\t */\n\tconst stopDetection = () => {\n\t\trender = false;\n\t}\n\tconst stop = () => {\n\t\trender = false;\n\t\tbackVideoRef.current.pause();\n\t\tconst tracks = webcamRef.current.stream.getTracks();\n\t\t// console.log(tracks);\n\t\tfor (const track of tracks) {\n\t\t\ttrack.stop();\n\t\t}\n\t}\n\tconst checkVideoTrack = () => {\n\t}\n\tlet recordedChuncks = [];\n\tlet audioStream;\n\tconst recordAudio = function () {\n\t\taudioStream = webcamRef.current.stream;\n\t\tconst options = {\n\t\t\tmimeType: 'audio/webm'\n\t\t};\n\t\trecordedChuncks = [];\n\t\tconsole.log(audioStream);\n\t\tvar context = new AudioContext({sampleRate: 44100});\n\t\tvar source = context.createMediaStreamSource(audioStream)\n\t\tvar processor = context.createScriptProcessor(16384, 1, 1);\n\t\tsource.connect(processor);\n\t\tprocessor.connect(context.destination);\n\t\tconst event = async function (e) {\n\t\t\tif (recording) {\n\t\t\t\t// console.log(e.inputBuffer);\n\t\t\t\trecordedChuncks.push(...e.inputBuffer.getChannelData(0));\n\t\t\t} else {\n\t\t\t\tprocessor.onaudioprocess = null;\n\t\t\t}\n\t\t}\n\t\tprocessor.onaudioprocess = event;\n\t}\n\tlet minutes = 0;\n\tlet seconds = 0;\n\tlet mill = 0;\n\tconst activeClock = function () {\n\t\tminutes = 0;\n\t\tseconds = 0;\n\t\tconst clock = document.getElementsByClassName(videoStyles.record_time)[0];\n\t\tconst timeTXT = clock.querySelector('h1');\n\t\tconst timeButton = clock.querySelector('button');\n\t\ttimeButton.classList.add(videoStyles.recording);\n\t\tconst tic = function () {\n\t\t\tif (recording) {\n\t\t\t\tlet timeStr = ``;\n\t\t\t\t// modify the time\n\t\t\t\tlet print = false;\n\t\t\t\tmill++;\n\t\t\t\tif (mill > 9) {\n\t\t\t\t\tmill = 0;\n\t\t\t\t\tseconds++;\n\t\t\t\t\tprint = true;\n\t\t\t\t}\n\t\t\t\tif (seconds > 59) {\n\t\t\t\t\tseconds = 0;\n\t\t\t\t\tminutes++;\n\t\t\t\t}\n\t\t\t\t// add padding for the minutes and seconds\n\t\t\t\tif (minutes < 10) {\n\t\t\t\t\ttimeStr += '0' + minutes;\n\t\t\t\t} else {\n\t\t\t\t\ttimeStr += minutes;\n\t\t\t\t}\n\t\t\t\ttimeStr += ':'\n\t\t\t\tif (seconds < 10) {\n\t\t\t\t\ttimeStr += '0' + seconds;\n\t\t\t\t} else {\n\t\t\t\t\ttimeStr += seconds;\n\t\t\t\t}\n\t\t\t\t// draw the time in browser\n\t\t\t\tif (print) {\n\t\t\t\t\ttimeTXT.innerHTML = timeStr;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttimeButton.classList.remove(videoStyles.recording);\n\t\t\t\tclearInterval(clockInterval);\n\t\t\t}\n\t\t}\n\t\ttic();\n\t\tclockInterval = setInterval(tic, 90);\n\t}\n\tlet int;\n\tconst record = () => {\n\t\tconst triggerView = triggerRef.current;\n\t\tconsole.log(triggerRef.current.querySelector('h1'));\n\t\tif (!recording && !recPressed) {\n\t\t\trecPressed = true;\n\t\t\trecordedframes = [];\n\t\t\tconst clock = document.getElementsByClassName(videoStyles.record_time)[0];\n\t\t\tconst timeTXT = clock.querySelector('h1');\n\t\t\ttimeTXT.innerHTML = '00:00';\n\t\t\tconst recButton = document.getElementsByClassName(videoStyles.recordBtn)[0];\n\t\t\trecButton.className = videoStyles.recordingBtn;\n\t\t\tconsole.log();\n\t\t\tconsole.log('animation init');\n\t\t\tlet count = 3;\n\t\t\tconsole.log(videoStyles.trigger_anim);\n\t\t\tfunction x(){\n\t\t\t\ttriggerView.querySelector('h1').className = '';\n\t\t\t\tif (count === 0) {\n\t\t\t\t\tconsole.log('stop trigger');\n\t\t\t\t\ttriggerView.style.display = 'none';\n\t\t\t\t\ttriggerView.querySelector('h1').className = '';\n\t\t\t\t\ttriggerView.querySelector('h1').classList.remove(videoStyles.trigger_anim);\n\t\t\t\t\tclearInterval(int);\n\t\t\t\t\trecording = true;\n\t\t\t\t\tactiveClock();\n\t\t\t\t\trecordAudio();\n\t\t\t\t} else {\n\t\t\t\t\ttriggerView.querySelector('h1').innerHTML = count + '!';\n\t\t\t\t\ttriggerView.querySelector('h1').classList.add(videoStyles.trigger_anim);\n\t\t\t\t\ttriggerView.style.display = 'block';\n\t\t\t\t\tcount--;\n\t\t\t\t}\n\t\t\t}\n\t\t\tx();\n\t\t\tint = setInterval(x, 1000);\n\t\t} else {\n\t\t\tconst recButton = document.getElementsByClassName(videoStyles.recordingBtn)[0];\n\t\t\trecButton.className = videoStyles.recordBtn;\n\t\t\trecording = false;\n\t\t\trecPressed = false;\n\t\t\tclearInterval(int);\n\t\t\ttriggerView.style.display = 'none';\n\t\t\tif (recordedframes.length > 0) {\n\t\t\t\tconst editor = document.getElementById('editor');\n\t\t\t\tconst props = {\n\t\t\t\t\timages: recordedframes,\n\t\t\t\t\taudio: recordedChuncks,\n\t\t\t\t\tdimensions: cropedDimensions,\n\t\t\t\t\tduration: [\n\t\t\t\t\t\tminutes,\n\t\t\t\t\t\tseconds,\n\t\t\t\t\t\tmill\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t\tReactDOM.render(\n\t\t\t\t\t(\n\t\t\t\t\t\t<RecorderEditor data={ props }></RecorderEditor>\n\t\t\t\t\t),\n\t\t\t\t\teditor\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\tconst save = async function () {\n\t\tconst videoData = {\n\t\t\tdimensions: cropedDimensions,\n\t\t\tvideoData: recordedframes,\n\t\t\taudioData: recordedChuncks\n\t\t}\n\t\tconsole.log(videoData);\n\t\tlet body;\n\t\t// try {\n\t\t// \tbody = JSON.stringify(videoData)\n\t\t// } catch (err) {\n\t\t// \tconsole.log(err);\n\t\t// \treturn;\n\t\t// }\n\t\tconst processId = uuidv4();\n\t\tfor (let aIndex = 0; aIndex < recordedChuncks.length; aIndex += 1024) {\n\t\t\tconst diff = recordedChuncks.length - aIndex;\n\t\t\tlet chunk;\n\t\t\tif (diff < 1024) {\n\t\t\t\tchunk = recordedChuncks.slice(aIndex, recordedChuncks.length) \n\t\t\t} else {\n\t\t\t\tchunk = recordedChuncks.slice(aIndex, aIndex + 1024);\n\t\t\t}\n\t\t\tconst req = await fetch(`http://127.0.0.1:3001/video/join`,\n\t\t\t\t{\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tid: processId,\n\t\t\t\t\t\ttype: 'audio',\n\t\t\t\t\t\tdata: chunk\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t);\n\t\t\tconsole.log(await req.json());\n\t\t}\n\t\tfor (let vIndex = 0; vIndex < recordedframes.length; vIndex++) {\n\t\t\tlet chunk;\n\t\t\tchunk = Array.from(recordedframes[vIndex]);\n\t\t\tconst req = await fetch(`http://127.0.0.1:3001/video/join`,\n\t\t\t\t{\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tid: processId,\n\t\t\t\t\t\ttype: 'video',\n\t\t\t\t\t\tdimensions: cropedDimensions,\n\t\t\t\t\t\tdata: chunk\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t);\n\t\t\tconsole.log(await req.json());\n\t\t}\n\t\tconst req = await fetch(`http://127.0.0.1:3001/video/join`,\n\t\t\t{\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tid: processId,\n\t\t\t\t\ttype: 'render',\n\t\t\t\t\ttime: {\n\t\t\t\t\t\tminutes: minutes,\n\t\t\t\t\t\tseconds: seconds\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t);\n\t\tconsole.log(await req.json());\n\t\topenPreview(processId);\n\t}\n\tconst openPreview = function (id) {\n\t\tconst videoPreview = document.getElementById('preview');\n\t\tReactDOM.render(\n\t\t\t(\n\t\t\t\t<PreviewPlayer clipId={ id }></PreviewPlayer>\n\t\t\t),\n\t\t\tvideoPreview\n\t\t);\n\t}\n\tconst deleteRecorded = function () {\n\t\trecordedChuncks = [];\n\t\trecordedframes = [];\n\t\tconst clock = document.getElementsByClassName(videoStyles.record_time)[0];\n\t\tconst timeTXT = clock.querySelector('h1');\n\t\ttimeTXT.innerHTML = '00:00';\n\t}\n\t// runBodySegment();\n\tnavigator.mediaDevices.getUserMedia({audio:true, video:false}).then(function(result) {\n\t\t\taudioStream = result;\n\t});\n\tconst renderView = function () {\n\t\treturn (\n\t\t\t<div className={ videoStyles.container }>\n\t\t\t<div id=\"preview\">\n\t\t\t</div>\n\t\t\t<div className={ videoStyles.loading } ref={loadingRef}>\n\t\t\t\t<h1></h1>\n\t\t\t\t<h2>Loading...</h2>\n\t\t\t</div>\n\t\t\t<div className={ videoStyles.trigger } ref={triggerRef}>\n\t\t\t\t<h1>3!</h1>\n\t\t\t</div>\n\t\t\t<div className={ videoStyles.back } onClick={() => { back() }}></div>\n\t\t\t\t<div className={ videoStyles.toolsMenu }>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li className={ videoStyles.save } onClick={()=>{save()}}></li>\n\t\t\t\t\t\t<li className={ videoStyles.back_remove } onClick={ ()=>{runBodySegment()} }></li>\n\t\t\t\t\t\t<li className={ videoStyles.other } onClick={ ()=> { openPreview('1d6649a9-0dbb-45ba-8511-7064fa9f27a6')} }></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<Webcam ref={webcamRef} className={ videoStyles.webcam }\n\t\t\t\t\tvideoConstraints={ videoConstraints }\n\t\t\t\t\t/>\n\t\t\t\t<canvas ref={canvasRef}\n\t\t\t\t\tclassName={ videoStyles.render_canvas }></canvas>\n\t\t\t\t<video \n\t\t\t\t\tref={ backVideoRef } className={ videoStyles.back_video }\n\t\t\t\t\t>\n\t\t\t\t\t<source src={ backVideo } type=\"video/mp4\"/>\n\t\t\t\t</video>\n\t\t\t\t<div className={ videoStyles.record_time }>\n\t\t\t\t\t<h1>00:00</h1>\n\t\t\t\t\t<button></button>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"editor\"></div>\n\t\t\t\t<div className={ videoStyles.controls }>\n\t\t\t\t\n\t\t\t\t\t<button className={ videoStyles.galleryBtn } onClick={()=> {}} ref={galleryRef}></button>\n\t\t\t\t\t<button className={ videoStyles.recordBtn } onClick={()=> { record() }}></button>\n\t\t\t\t\t<button className={ videoStyles.deleteBtn } onClick={()=> { deleteRecorded() } }></button>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\treturn renderView();\n}\n\nclass MainView extends React.Component {\n\trender () {\n\t\treturn (\n\t\t\t<div className={ menuStyles.menu }>\n\t\t\t\t<button className={ menuStyles.gallery } onClick={()=>{this.gallery()}}></button>\n\t\t\t\t<button className={ menuStyles.creator } onClick={()=>{this.creator()}}></button>\n\t\t\t\t<button className={ menuStyles.user } onClick={()=>{this.user()}}></button>\n\t\t\t</div>\n\t\t);\n\t}\n\tgallery () {\n\n\t}\n\tcreator () {\n\t\tReactDOM.render(\n\t\t\t(\n\t\t\t\t<VideoFrame></VideoFrame>\n\t\t\t),\n\t\t\troot\n\t\t);\n\t}\n\tuser () {\n\n\t}\n}\n\nfunction App() {\n\tconst renderVideoCapture = () => {\n\t\tReact.render(\n\t\t\t(\n\t\t\t\t<VideoFrame>\n\t\t\t\t</VideoFrame>\n\t\t\t),\n\t\t\troot\n\t\t)\n\t};\n  return (\n\t<MainView></MainView>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}